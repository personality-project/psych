<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Find correlations for mixtures of continuous, polytomous, and dichotomous variables — mixedCor • psych</title>

<!-- jquery -->
<script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">


<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script>
<script src="../pkgdown.js"></script>

<!-- mathjax -->
<script src='https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="../index.html">psych</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../reference/index.html">Reference</a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

      <div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Find correlations for mixtures of continuous, polytomous, and dichotomous variables</h1>
    </div>

    
    <p>For data sets with continuous, polytomous and dichotmous variables, the absolute Pearson correlation is downward biased from the underlying latent correlation.  mixedCor finds Pearson correlations for the continous variables, <code><a href='tetrachor.html'>polychoric</a></code>s for the polytomous items, <code><a href='tetrachor.html'>tetrachoric</a></code>s for the dichotomous items, and the <code><a href='tetrachor.html'>polyserial</a></code> or <code><a href='tetrachor.html'>biserial</a></code> correlations for the various mixed variables. Results include the complete correlation matrix, as well as the separate correlation matrices and difficulties for the polychoric and tetrachoric correlations.</p>
    

    <pre class="usage"><span class='fu'>mixedCor</span>(<span class='kw'>data</span><span class='kw'>=</span><span class='kw'>NULL</span>,<span class='kw'>c</span><span class='kw'>=</span><span class='kw'>NULL</span>,<span class='kw'>p</span><span class='kw'>=</span><span class='kw'>NULL</span>,<span class='kw'>d</span><span class='kw'>=</span><span class='kw'>NULL</span>,<span class='kw'>smooth</span><span class='kw'>=</span><span class='fl'>TRUE</span>,<span class='kw'>correct</span><span class='kw'>=</span><span class='fl'>.5</span>,<span class='kw'>global</span><span class='kw'>=</span><span class='fl'>TRUE</span>,<span class='kw'>ncat</span><span class='kw'>=</span><span class='fl'>8</span>,
             <span class='kw'>use</span><span class='kw'>=</span><span class='st'>"pairwise"</span>,<span class='kw'>method</span><span class='kw'>=</span><span class='st'>"pearson"</span>,<span class='kw'>weight</span><span class='kw'>=</span><span class='kw'>NULL</span>)

<span class='fu'>mixed.cor</span>(<span class='kw'>x</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>p</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>d</span><span class='kw'>=</span><span class='kw'>NULL</span>,<span class='kw'>smooth</span><span class='kw'>=</span><span class='fl'>TRUE</span>, <span class='kw'>correct</span><span class='kw'>=</span><span class='fl'>.5</span>,<span class='kw'>global</span><span class='kw'>=</span><span class='fl'>TRUE</span>,
        <span class='kw'>ncat</span><span class='kw'>=</span><span class='fl'>8</span>,<span class='kw'>use</span><span class='kw'>=</span><span class='st'>"pairwise"</span>,<span class='kw'>method</span><span class='kw'>=</span><span class='st'>"pearson"</span>,<span class='kw'>weight</span><span class='kw'>=</span><span class='kw'>NULL</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a> Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>data</th>
      <td><p>The data set to be analyzed (either a matrix or dataframe)</p></td>
    </tr>
    <tr>
      <th>c</th>
      <td><p>The names (or locations) of the continuous variables) (may be missing)</p></td>
    </tr>
    <tr>
      <th>x</th>
      <td><p>A set of continuous variables (may be missing) or, if p and d are missing, the variables to be analyzed.</p></td>
    </tr>
    <tr>
      <th>p</th>
      <td><p>A set of polytomous items (may be missing)</p></td>
    </tr>
    <tr>
      <th>d</th>
      <td><p>A set of dichotomous items (may be missing)</p></td>
    </tr>
    <tr>
      <th>smooth</th>
      <td><p>If TRUE, then smooth the correlation matix if it is non-positive definite</p></td>
    </tr>
    <tr>
      <th>correct</th>
      <td><p>When finding tetrachoric correlations, what value should be used to correct for continuity?</p></td>
    </tr>
    <tr>
      <th>global</th>
      <td><p>For polychorics, should the global values of the tau parameters be used, or should the pairwise values be used.  Set to local if errors are occurring.</p></td>
    </tr>
    <tr>
      <th>ncat</th>
      <td><p>The number of categories beyond which a variable is considered "continuous".</p></td>
    </tr>
    <tr>
      <th>use</th>
      <td><p>The various options to the <code>cor</code> function include "everything", "all.obs", "complete.obs", "na.or.complete", or "pairwise.complete.obs". The default here is "pairwise"</p></td>
    </tr>
    <tr>
      <th>method</th>
      <td><p>The correlation method to use for the continuous variables. "pearson" (default), "kendall", or "spearman"</p></td>
    </tr>
    <tr>
      <th>weight</th>
      <td><p>If specified, this is a vector of weights (one per participant) to differentially weight participants. The NULL case is equivalent of weights of 1 for all cases.</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>This function is particularly useful as part of the Synthetic Apeture Personality Assessment (SAPA) (<a href = 'http://sapa-project.org'>http://sapa-project.org</a>) data sets where continuous variables (age, SAT V, SAT Q, etc) and mixed with polytomous personality items taken from the International Personality Item Pool (IPIP) and the dichotomous experimental IQ items that have been developed as part of SAPA (see, e.g., Revelle, Wilt and Rosenthal, 2010).</p>
<p>This is a very computationally intensive function which can be speeded up considerably by using multiple cores and using the parallel package.  The number of cores to use when doing polychoric or tetrachoric. The greatest step in speed is going from 1 core to 2.  This is about a 50% savings.  Going to 4 cores seems to have about at 66% savings, and 8 a 75% savings.  The number of parallel processes defaults to 2 but can be modified by using the <code>options</code> command:  options("mc.cores"=4) will set the number of cores to 4.</p>
<p>Item response analyses using <code><a href='irt.fa.html'>irt.fa</a></code> may be done separately on the polytomous and dichotomous items  in order to develop internally consistent scales. These scale may, in turn, be correlated with each other using the complete correlation matrix found by mixed.cor and using the <code><a href='score.items.html'>score.items</a></code> function.</p>
<p>This function is not quite as flexible as the hetcor function in John Fox's polychor package.</p>
<p>Note that the variables may be organized by type of data:  continuous, polytomous, and dichotomous. This is done by simply specifying c, (or x in mixed.cor), p, and d. This is advantageous in the case of some continuous variables having a limited number of categories because of subsetting.</p>
    
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p></p>
<dt>rho</dt><dd><p>The complete matrix</p></dd>
 <dt>rx</dt><dd><p>The Pearson correlation matrix for the continuous items</p></dd>
 <dt>poly</dt><dd><p>the polychoric correlation (poly$rho) and the item difficulties (poly$tau)</p></dd>
 <dt>tetra</dt><dd><p>the tetrachoric correlation (tetra$rho) and the item difficulties (tetra$tau)</p></dd>

    
    <h2 class="hasAnchor" id="note"><a class="anchor" href="#note"></a>Note</h2>

    <p>mixed.cor was designed for the SAPA project (<a href = 'http://sapa-project.org'>http://sapa-project.org</a>) with large data sets with a mixture of continuous, dichotomous, and polytomous data.  For smaller data sets, it is sometimes the case that the global estimate of the tau parameter will lead to unstable solutions.  This may be corrected by setting the global parameter = FALSE.
    <code>mixedCor</code> was added in April, 2017 to be slightly more user friendly.</p>
<p>When finding correlations between dummy coded SAPA data (e.g., of occupations), the real correlations are all slightly less than zero because of the ipsatized nature of the data.  This leads to a non-positive definite correlation matrix because the matrix is no longer of full rank. Smoothing will correct this, even though this might not be desired.  Turn off smoothing in this case.</p>
<p>Note that the variables no longer need to be organized by type of data: first continuous, then polytomous, then dichotomous.  However, this automatic detection will lead to problems if the variables such as age are limited to less than 8 categories but those category values differ from the polytomous items.  The fall back is to specify x, p, and d.</p>
    
    <h2 class="hasAnchor" id="references"><a class="anchor" href="#references"></a>References</h2>

    <p>W.Revelle, J.Wilt, and A.Rosenthal. Personality and cognition: The personality-cognition link. In A.Gruszka, G. Matthews, and B. Szymura, editors,  Handbook of Individual Differences in Cognition: Attention, Memory and Executive
  Control, chapter 2, pages 27-49. Springer, 2010.</p>
<p>W Revelle, D. M. Condon,  J. Wilt,  J.A. French,  A. Brown, and L G. Elleman(2016) Web and phone based data collection using planned missing designs in Nigel G. Fielding and Raymond M. Lee and Grant Blank (eds) SAGE Handbook of Online Research Methods, Sage Publications, Inc.</p>
    
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <p><code><a href='tetrachor.html'>polychoric</a></code>, <code><a href='tetrachor.html'>tetrachoric</a></code>, <code><a href='score.items.html'>scoreItems</a></code>,  <code><a href='cluster.cor.html'>scoreOverlap</a></code> <code><a href='score.irt.html'>scoreIrt</a></code></p>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='fu'>data</span>(<span class='no'>bfi</span>)
<span class='no'>r</span> <span class='kw'>&lt;-</span> <span class='fu'>mixedCor</span>(<span class='kw'>data</span><span class='kw'>=</span><span class='no'>bfi</span>[,<span class='fu'>c</span>(<span class='fl'>1</span>:<span class='fl'>5</span>,<span class='fl'>26</span>,<span class='fl'>28</span>)])</div><div class='output co'>#&gt; </div><div class='input'><span class='no'>r</span></div><div class='output co'>#&gt; Call: mixedCor(data = bfi[, c(1:5, 26, 28)])
#&gt;        A1    A2    A3    A4    A5    gendr age  
#&gt; A1      1.00                                    
#&gt; A2     -0.41  1.00                              
#&gt; A3     -0.32  0.56  1.00                        
#&gt; A4     -0.18  0.39  0.41  1.00                  
#&gt; A5     -0.23  0.45  0.57  0.36  1.00            
#&gt; gender -0.23  0.25  0.20  0.20  0.14  1.00      
#&gt; age    -0.17  0.12  0.07  0.16  0.14  0.06  1.00</div><div class='input'><span class='co'>#this is the same as</span>
<span class='no'>r</span> <span class='kw'>&lt;-</span> <span class='fu'>mixedCor</span>(<span class='kw'>data</span><span class='kw'>=</span><span class='no'>bfi</span>,<span class='kw'>p</span><span class='kw'>=</span><span class='fl'>1</span>:<span class='fl'>5</span>,<span class='kw'>c</span><span class='kw'>=</span><span class='fl'>28</span>,<span class='kw'>d</span><span class='kw'>=</span><span class='fl'>26</span>)</div><div class='output co'>#&gt; </div><div class='input'><span class='no'>r</span> <span class='co'>#note how the variable order reflects the original order in the data</span></div><div class='output co'>#&gt; Call: mixedCor(data = bfi, c = 28, p = 1:5, d = 26)
#&gt;        A1    A2    A3    A4    A5    gendr age  
#&gt; A1      1.00                                    
#&gt; A2     -0.41  1.00                              
#&gt; A3     -0.32  0.56  1.00                        
#&gt; A4     -0.18  0.39  0.41  1.00                  
#&gt; A5     -0.23  0.45  0.57  0.36  1.00            
#&gt; gender -0.23  0.25  0.20  0.20  0.14  1.00      
#&gt; age    -0.17  0.12  0.07  0.16  0.14  0.06  1.00</div><div class='input'><span class='co'>#compare to raw Pearson</span>
<span class='co'>#note that the biserials and polychorics are not attenuated</span>
<span class='no'>rp</span> <span class='kw'>&lt;-</span> <span class='fu'>cor</span>(<span class='no'>bfi</span>[<span class='fu'>c</span>(<span class='fl'>1</span>:<span class='fl'>5</span>,<span class='fl'>26</span>,<span class='fl'>28</span>)],<span class='kw'>use</span><span class='kw'>=</span><span class='st'>"pairwise"</span>)
<span class='fu'><a href='misc.html'>lowerMat</a></span>(<span class='no'>rp</span>)</div><div class='output co'>#&gt;        A1    A2    A3    A4    A5    gendr age  
#&gt; A1      1.00                                    
#&gt; A2     -0.34  1.00                              
#&gt; A3     -0.27  0.49  1.00                        
#&gt; A4     -0.15  0.34  0.36  1.00                  
#&gt; A5     -0.18  0.39  0.50  0.31  1.00            
#&gt; gender -0.16  0.18  0.14  0.13  0.10  1.00      
#&gt; age    -0.16  0.11  0.07  0.14  0.13  0.05  1.00</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#details">Details</a></li>

      <li><a href="#value">Value</a></li>

      <li><a href="#note">Note</a></li>

      <li><a href="#references">References</a></li>

      <li><a href="#see-also">See also</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

    <h2>Author</h2>
    William Revelle
  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by William Revelle.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://hadley.github.io/pkgdown/">pkgdown</a>.</p>
</div>

      </footer>
   </div>

  </body>
</html>
