<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Plot means and confidence intervals for multiple groups — error.bars.by • psych</title>

<!-- jquery -->
<script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">


<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script>
<script src="../pkgdown.js"></script>

<!-- mathjax -->
<script src='https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="../index.html">psych</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../reference/index.html">Reference</a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

      <div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Plot means and confidence intervals for multiple groups</h1>
    </div>

    
    <p>One of the many functions in R to plot means and confidence intervals.  Meant mainly for demonstration purposes for showing the probabilty of replication from multiple samples.  Can also be combined with such functions as boxplot to summarize distributions.  Means and standard errors for each group are calculated using <code><a href='describe.by.html'>describe.by</a></code>.</p>
    

    <pre class="usage"><span class='fu'>error.bars.by</span>(<span class='no'>x</span>,<span class='no'>group</span>,<span class='kw'>by.var</span><span class='kw'>=</span><span class='fl'>FALSE</span>,<span class='kw'>x.cat</span><span class='kw'>=</span><span class='fl'>TRUE</span>,<span class='kw'>ylab</span> <span class='kw'>=</span><span class='kw'>NULL</span>,<span class='kw'>xlab</span><span class='kw'>=</span><span class='kw'>NULL</span>,<span class='kw'>main</span><span class='kw'>=</span><span class='kw'>NULL</span>,<span class='kw'>ylim</span><span class='kw'>=</span> <span class='kw'>NULL</span>,
<span class='kw'>xlim</span><span class='kw'>=</span><span class='kw'>NULL</span>, <span class='kw'>eyes</span><span class='kw'>=</span><span class='fl'>TRUE</span>,<span class='kw'>alpha</span><span class='kw'>=</span><span class='fl'>.05</span>,<span class='kw'>sd</span><span class='kw'>=</span><span class='fl'>FALSE</span>,<span class='kw'>labels</span><span class='kw'>=</span><span class='kw'>NULL</span>, <span class='kw'>v.labels</span><span class='kw'>=</span><span class='kw'>NULL</span>, <span class='kw'>pos</span><span class='kw'>=</span><span class='kw'>NULL</span>,
<span class='kw'>arrow.len</span><span class='kw'>=</span><span class='fl'>.05</span>,<span class='kw'>add</span><span class='kw'>=</span><span class='fl'>FALSE</span>,<span class='kw'>bars</span><span class='kw'>=</span><span class='fl'>FALSE</span>,<span class='kw'>within</span><span class='kw'>=</span><span class='fl'>FALSE</span>,<span class='kw'>colors</span><span class='kw'>=</span><span class='fu'>c</span>(<span class='st'>"black"</span>,<span class='st'>"blue"</span>,<span class='st'>"red"</span>),
 <span class='no'>lty</span>,<span class='kw'>lines</span><span class='kw'>=</span><span class='fl'>TRUE</span>, <span class='kw'>legend</span><span class='kw'>=</span><span class='fl'>0</span>,<span class='no'>pch</span>,<span class='kw'>density</span><span class='kw'>=</span>-<span class='fl'>10</span>,<span class='no'>...</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a> Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>x</th>
      <td><p>A data frame or matrix</p></td>
    </tr>
    <tr>
      <th>group</th>
      <td><p>A grouping variable</p></td>
    </tr>
    <tr>
      <th>by.var</th>
      <td><p>A different line for each group (default) or each variable</p></td>
    </tr>
    <tr>
      <th>x.cat</th>
      <td><p>Is the grouping variable categorical (TRUE) or continuous (FALSE</p></td>
    </tr>
    <tr>
      <th>ylab</th>
      <td><p>y label</p></td>
    </tr>
    <tr>
      <th>xlab</th>
      <td><p>x label</p></td>
    </tr>
    <tr>
      <th>main</th>
      <td><p>title for figure</p></td>
    </tr>
    <tr>
      <th>ylim</th>
      <td><p>if specified, the y limits for the plot, otherwise based upon the data</p></td>
    </tr>
    <tr>
      <th>xlim</th>
      <td><p>if specified, the x limits for the plot, otherwise based upon the data</p></td>
    </tr>
    <tr>
      <th>eyes</th>
      <td><p>Should 'cats eyes' be drawn'</p></td>
    </tr>
    <tr>
      <th>alpha</th>
      <td><p>alpha level of confidence interval.  Default is 1- alpha =95% confidence interval</p></td>
    </tr>
    <tr>
      <th>sd</th>
      <td><p>sd=TRUE  will plot Standard Deviations instead of standard errors</p></td>
    </tr>
    <tr>
      <th>labels</th>
      <td><p>X axis label</p></td>
    </tr>
    <tr>
      <th>v.labels</th>
      <td><p>For a bar plot legend, these are the variable labels</p></td>
    </tr>
    <tr>
      <th>pos</th>
      <td><p>where to place text: below, left, above, right</p></td>
    </tr>
    <tr>
      <th>arrow.len</th>
      <td><p>How long should the top of the error bars be?</p></td>
    </tr>
    <tr>
      <th>add</th>
      <td><p>add=FALSE, new plot, add=TRUE, just points and error bars</p></td>
    </tr>
    <tr>
      <th>bars</th>
      <td><p>Draw a barplot with error bars rather than a simple plot of the means</p></td>
    </tr>
    <tr>
      <th>within</th>
      <td><p>Should the s.e. be corrected by the correlation with the other variables?</p></td>
    </tr>
    <tr>
      <th>colors</th>
      <td><p>groups will be plotted in different colors (mod n.groups).  See the note for how to make them transparent.</p></td>
    </tr>
    <tr>
      <th>lty</th>
      <td><p>line type may be specified in the case of not plotting by variables</p></td>
    </tr>
    <tr>
      <th>lines</th>
      <td><p>By default, when plotting different groups, connect the groups with a line of type = lty.  If lines is FALSE, then do not connect the groups</p></td>
    </tr>
    <tr>
      <th>legend</th>
      <td><p>Where should the legend be drawn: 0 (do not draw it), 1= lower right corner, 2 = bottom, 3 ... 8 continue  clockwise, 9 is the center</p></td>
    </tr>
    <tr>
      <th>pch</th>
      <td><p>The first plot symbol to use.  Subsequent groups are pch + group</p></td>
    </tr>
    <tr>
      <th>density</th>
      <td><p>How many lines/inch should fill the cats eyes.  If missing, non-transparent colors are used.  If negative, transparent colors are used.</p></td>
    </tr>
    <tr>
      <th>&#8230;</th>
      <td><p>other parameters to pass to the plot function e.g., lty="dashed" to draw dashed lines</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>Drawing the mean +/- a confidence interval is a frequently used function when reporting experimental results. By default, the confidence interval is 1.96 standard errors (adjusted for the t-distribution).</p>
<p>This function was originally just a wrapper for <code><a href='error.bars.html'>error.bars</a></code> but has been written to allow groups to be organized either as the x axis or as separate lines.</p>
<p>If desired, a barplot with error bars can be shown. Many find this type of plot to be uninformative (e.g.,   http://biostat.mc.vanderbilt.edu/DynamitePlots ) and recommend the more standard dot plot.</p>
<p>Note in particular, if choosing to draw barplots, the starting value is 0.0 and setting the ylim parameter can lead to some awkward results if 0 is not included in the ylim range.  Did you really mean to draw a bar plot in this case?</p>
<p>For up to three groups, the colors are by default "black", "blue" and "red". For more than 3 groups, they are by default rainbow colors with an alpha factor (transparency) of .5.</p>
<p>To make colors semitransparent, set the density to a negative number.  See the last example.</p>
    
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>Graphic output showing the means + x% confidence intervals for each group.  For ci=1.96, and normal data, this will be the 95% confidence region.  For ci=1, the 68% confidence region.</p>
<p>These confidence regions are based upon normal theory and do not take into account any skew in the variables.  More accurate confidence intervals could be found by resampling.</p>
    
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <p>See Also as <code><a href='error.crosses.html'>error.crosses</a></code>, <code><a href='error.bars.html'>error.bars</a></code></p>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'>
<span class='fu'>data</span>(<span class='no'>sat.act</span>)
<span class='co'>#The generic plot of variables by group</span>
<span class='fu'>error.bars.by</span>(<span class='no'>sat.act</span>[<span class='fl'>1</span>:<span class='fl'>4</span>],<span class='no'>sat.act</span>$<span class='no'>gender</span>,<span class='kw'>legend</span><span class='kw'>=</span><span class='fl'>7</span>)</div><img src='error.bars.by-2.png' alt='' width='540' height='400' /><div class='input'><span class='co'>#a bar plot</span>
<span class='fu'>error.bars.by</span>(<span class='no'>sat.act</span>[<span class='fl'>5</span>:<span class='fl'>6</span>],<span class='no'>sat.act</span>$<span class='no'>gender</span>,<span class='kw'>bars</span><span class='kw'>=</span><span class='fl'>TRUE</span>,<span class='kw'>labels</span><span class='kw'>=</span><span class='fu'>c</span>(<span class='st'>"male"</span>,<span class='st'>"female"</span>),
    <span class='kw'>main</span><span class='kw'>=</span><span class='st'>"SAT V and SAT Q by gender"</span>,<span class='kw'>ylim</span><span class='kw'>=</span><span class='fu'>c</span>(<span class='fl'>0</span>,<span class='fl'>800</span>),<span class='kw'>colors</span><span class='kw'>=</span><span class='fu'>c</span>(<span class='st'>"red"</span>,<span class='st'>"blue"</span>),
    <span class='kw'>legend</span><span class='kw'>=</span><span class='fl'>5</span>,<span class='kw'>v.labels</span><span class='kw'>=</span><span class='fu'>c</span>(<span class='st'>"SATV"</span>,<span class='st'>"SATQ"</span>))  <span class='co'>#draw a barplot</span></div><img src='error.bars.by-4.png' alt='' width='540' height='400' /><div class='input'><span class='co'>#a bar plot of SAT by age -- not recommended, see the next plot</span>
<span class='fu'>error.bars.by</span>(<span class='no'>sat.act</span>[<span class='fl'>5</span>:<span class='fl'>6</span>],<span class='no'>sat.act</span>$<span class='no'>education</span>,<span class='kw'>bars</span><span class='kw'>=</span><span class='fl'>TRUE</span>,<span class='kw'>xlab</span><span class='kw'>=</span><span class='st'>"Education"</span>,
   <span class='kw'>main</span><span class='kw'>=</span><span class='st'>"95 percent confidence limits of Sat V and Sat Q"</span>, <span class='kw'>ylim</span><span class='kw'>=</span><span class='fu'>c</span>(<span class='fl'>0</span>,<span class='fl'>800</span>),
   <span class='kw'>v.labels</span><span class='kw'>=</span><span class='fu'>c</span>(<span class='st'>"SATV"</span>,<span class='st'>"SATQ"</span>),<span class='kw'>legend</span><span class='kw'>=</span><span class='fl'>5</span>,<span class='kw'>colors</span><span class='kw'>=</span><span class='fu'>c</span>(<span class='st'>"red"</span>,<span class='st'>"blue"</span>) )</div><img src='error.bars.by-6.png' alt='' width='540' height='400' /><div class='input'><span class='co'>#a better graph uses points not bars</span>
  <span class='co'>#plot SAT V and SAT Q by education</span>
<span class='fu'>error.bars.by</span>(<span class='no'>sat.act</span>[<span class='fl'>5</span>:<span class='fl'>6</span>],<span class='no'>sat.act</span>$<span class='no'>education</span>,<span class='fl'>TRUE</span>, <span class='kw'>xlab</span><span class='kw'>=</span><span class='st'>"Education"</span>,
    <span class='kw'>legend</span><span class='kw'>=</span><span class='fl'>5</span>,<span class='kw'>labels</span><span class='kw'>=</span><span class='fu'>colnames</span>(<span class='no'>sat.act</span>[<span class='fl'>5</span>:<span class='fl'>6</span>]),<span class='kw'>ylim</span><span class='kw'>=</span><span class='fu'>c</span>(<span class='fl'>525</span>,<span class='fl'>700</span>),
     <span class='kw'>main</span><span class='kw'>=</span><span class='st'>"self reported SAT scores by education"</span>)</div><img src='error.bars.by-8.png' alt='' width='540' height='400' /><div class='input'><span class='co'>#make the cats eyes semi-transparent by specifying a negative density</span>
<span class='fu'>error.bars.by</span>(<span class='no'>sat.act</span>[<span class='fl'>5</span>:<span class='fl'>6</span>],<span class='no'>sat.act</span>$<span class='no'>education</span>,<span class='fl'>TRUE</span>, <span class='kw'>xlab</span><span class='kw'>=</span><span class='st'>"Education"</span>,
    <span class='kw'>legend</span><span class='kw'>=</span><span class='fl'>5</span>,<span class='kw'>labels</span><span class='kw'>=</span><span class='fu'>colnames</span>(<span class='no'>sat.act</span>[<span class='fl'>5</span>:<span class='fl'>6</span>]),<span class='kw'>ylim</span><span class='kw'>=</span><span class='fu'>c</span>(<span class='fl'>525</span>,<span class='fl'>700</span>),
     <span class='kw'>main</span><span class='kw'>=</span><span class='st'>"self reported SAT scores by education"</span>,<span class='kw'>density</span><span class='kw'>=</span>-<span class='fl'>10</span>)</div><img src='error.bars.by-10.png' alt='' width='540' height='400' /><div class='input'>
<span class='co'>#now for a more complicated examples using 25 big 5 items scored into 5 scales</span>
<span class='co'>#and showing age trends by decade </span>
<span class='co'>#this shows how to convert many levels of a grouping variable (age) into more manageable levels.</span>
<span class='fu'>data</span>(<span class='no'>bfi</span>)   <span class='co'>#The Big 5 data</span>
<span class='co'>#first create the keys </span>
 <span class='no'>keys.list</span> <span class='kw'>&lt;-</span> <span class='fu'>list</span>(<span class='kw'>Agree</span><span class='kw'>=</span><span class='fu'>c</span>(-<span class='fl'>1</span>,<span class='fl'>2</span>:<span class='fl'>5</span>),<span class='kw'>Conscientious</span><span class='kw'>=</span><span class='fu'>c</span>(<span class='fl'>6</span>:<span class='fl'>8</span>,-<span class='fl'>9</span>,-<span class='fl'>10</span>),
        <span class='kw'>Extraversion</span><span class='kw'>=</span><span class='fu'>c</span>(-<span class='fl'>11</span>,-<span class='fl'>12</span>,<span class='fl'>13</span>:<span class='fl'>15</span>),<span class='kw'>Neuroticism</span><span class='kw'>=</span><span class='fu'>c</span>(<span class='fl'>16</span>:<span class='fl'>20</span>),<span class='kw'>Openness</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='fl'>21</span>,-<span class='fl'>22</span>,<span class='fl'>23</span>,<span class='fl'>24</span>,-<span class='fl'>25</span>))
 <span class='no'>keys</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='make.keys.html'>make.keys</a></span>(<span class='no'>bfi</span>,<span class='no'>keys.list</span>)
 <span class='co'>#then create the scores for those older than 10 and less than 80</span>
 <span class='no'>bfis</span> <span class='kw'>&lt;-</span> <span class='fu'>subset</span>(<span class='no'>bfi</span>,((<span class='no'>bfi</span>$<span class='no'>age</span> <span class='kw'>&gt;</span> <span class='fl'>10</span>) <span class='kw'>&amp;</span> (<span class='no'>bfi</span>$<span class='no'>age</span> <span class='kw'>&lt;</span> <span class='fl'>80</span>)))

 <span class='no'>scores</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='score.items.html'>scoreItems</a></span>(<span class='no'>keys</span>,<span class='no'>bfis</span>,<span class='kw'>min</span><span class='kw'>=</span><span class='fl'>1</span>,<span class='kw'>max</span><span class='kw'>=</span><span class='fl'>6</span>) <span class='co'>#set the right limits for item reversals</span>
 <span class='co'>#now draw the results by age</span>

 <span class='fu'>error.bars.by</span>(<span class='no'>scores</span>$<span class='no'>scores</span>,<span class='fu'>round</span>(<span class='no'>bfis</span>$<span class='no'>age</span>/<span class='fl'>10</span>)*<span class='fl'>10</span>,<span class='kw'>by.var</span><span class='kw'>=</span><span class='fl'>TRUE</span>,
      <span class='kw'>main</span><span class='kw'>=</span><span class='st'>"BFI age trends"</span>,<span class='kw'>legend</span><span class='kw'>=</span><span class='fl'>3</span>,<span class='kw'>labels</span><span class='kw'>=</span><span class='fu'>colnames</span>(<span class='no'>scores</span>$<span class='no'>scores</span>),
        <span class='kw'>xlab</span><span class='kw'>=</span><span class='st'>"Age"</span>,<span class='kw'>ylab</span><span class='kw'>=</span><span class='st'>"Mean item score"</span>)</div><img src='error.bars.by-12.png' alt='' width='540' height='400' /><div class='input'>
 <span class='fu'>error.bars.by</span>(<span class='no'>scores</span>$<span class='no'>scores</span>,<span class='fu'>round</span>(<span class='no'>bfis</span>$<span class='no'>age</span>/<span class='fl'>10</span>)*<span class='fl'>10</span>,<span class='kw'>by.var</span><span class='kw'>=</span><span class='fl'>TRUE</span>,
      <span class='kw'>main</span><span class='kw'>=</span><span class='st'>"BFI age trends"</span>,<span class='kw'>legend</span><span class='kw'>=</span><span class='fl'>3</span>,<span class='kw'>labels</span><span class='kw'>=</span><span class='fu'>colnames</span>(<span class='no'>scores</span>$<span class='no'>scores</span>),
        <span class='kw'>xlab</span><span class='kw'>=</span><span class='st'>"Age"</span>,<span class='kw'>ylab</span><span class='kw'>=</span><span class='st'>"Mean item score"</span>,<span class='kw'>density</span><span class='kw'>=</span>-<span class='fl'>10</span>)</div><img src='error.bars.by-14.png' alt='' width='540' height='400' /></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#details">Details</a></li>

      <li><a href="#value">Value</a></li>

      <li><a href="#see-also">See also</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by William Revelle.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://hadley.github.io/pkgdown/">pkgdown</a>.</p>
</div>

      </footer>
   </div>

  </body>
</html>
