<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Find correlations of composite variables (corrected for overlap) from a larger matrix. — scoreOverlap • psych</title>

<!-- jquery -->
<script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">


<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script>
<script src="../pkgdown.js"></script>

<!-- mathjax -->
<script src='https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="../index.html">psych</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../reference/index.html">Reference</a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

      <div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Find correlations of composite variables (corrected for overlap) from a larger matrix.</h1>
    </div>

    
    <p>Given a  n x c cluster definition matrix of -1s, 0s, and 1s (the keys) , and a n x n correlation matrix, or an N x n data matrix, find the correlations of the composite clusters.  The keys matrix can be entered by hand, copied from the clipboard (<code><a href='read.clipboard.html'>read.clipboard</a></code>), or taken as output from the <code><a href='factor2cluster.html'>factor2cluster</a></code> or <code><a href='make.keys.html'>make.keys</a></code> functions.  Similar functionality to <code><a href='score.items.html'>scoreItems</a></code> which also gives item by cluster correlations.</p>
    

    <pre class="usage"><span class='fu'>scoreOverlap</span>(<span class='no'>keys</span>, <span class='no'>r</span>, <span class='kw'>correct</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='kw'>SMC</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='kw'>av.r</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='kw'>item.smc</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
     <span class='kw'>impute</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>,<span class='kw'>select</span><span class='kw'>=</span><span class='fl'>TRUE</span>)
<span class='fu'>cluster.cor</span>(<span class='no'>keys</span>, <span class='no'>r.mat</span>, <span class='kw'>correct</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>,<span class='kw'>SMC</span><span class='kw'>=</span><span class='fl'>TRUE</span>,<span class='kw'>item.smc</span><span class='kw'>=</span><span class='kw'>NULL</span>,<span class='kw'>impute</span><span class='kw'>=</span><span class='fl'>TRUE</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a> Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>keys</th>
      <td><p>A list of scale/cluster keys, or a  matrix of cluster keys</p></td>
    </tr>
    <tr>
      <th>r.mat</th>
      <td><p>A correlation matrix</p></td>
    </tr>
    <tr>
      <th>r</th>
      <td><p>Either a correlation matrix or a raw data matrix</p></td>
    </tr>
    <tr>
      <th>correct</th>
      <td><p>TRUE shows both raw and corrected for attenuation correlations</p></td>
    </tr>
    <tr>
      <th>SMC</th>
      <td><p>Should squared multiple correlations be used as communality estimates for the correlation matrix?</p></td>
    </tr>
    <tr>
      <th>item.smc</th>
      <td><p>the smcs of the items may be passed into the function for speed, or calculated if SMC=TRUE</p></td>
    </tr>
    <tr>
      <th>impute</th>
      <td><p>if TRUE, impute missing scale correlations based upon the average interitem correlation, otherwise return NA.</p></td>
    </tr>
    <tr>
      <th>av.r</th>
      <td><p>Should the average r be used in correcting for overlap? smcs otherwise.</p></td>
    </tr>
    <tr>
      <th>select</th>
      <td><p>By default, just find statistics for items included in the scoring keys. This allows for finding scores from matrices with bad items if they are not included in the set of scoring keys.</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>This are two of the functions used in the SAPA (<a href = 'http://sapa-project.org'>http://sapa-project.org</a>) procedures to form synthetic correlation matrices.  Given any correlation matrix of items, it is easy to find the correlation matrix of scales made up of those items. This can also be done from the original data matrix or from the correlation matrix using <code><a href='score.items.html'>scoreItems</a></code> which is probably preferred unless the keys are overlapping.</p>
<p>In the case of overlapping keys, (items being scored on multiple scales), <code>scoreOverlap</code> will adjust for this overlap by replacing the overlapping covariances (which are variances when overlapping) with the corresponding best estimate of an item's ``true" variance using either the average correlation or the smc estimate for that item.  This parallels the operation done when finding alpha reliability.  This is similar to ideas suggested by Cureton (1966) and Bashaw and Anderson (1966) but uses the smc or the average interitem correlation (default).</p>
<p>A typical use in the SAPA project is to form item composites by clustering or factoring (see <code><a href='fa.html'>fa</a></code>, <code><a href='ICLUST.html'>ICLUST</a></code>, <code><a href='principal.html'>principal</a></code>), extract the clusters from these results (<code><a href='factor2cluster.html'>factor2cluster</a></code>), and then form the composite correlation matrix using <code>cluster.cor</code>.  The variables in this reduced matrix may then be used in multiple correlatin procedures using <code><a href='set.cor.html'>mat.regress</a></code>.
    The original correlation is pre and post multiplied by the (transpose) of the keys matrix.
    If some correlations are missing from the original matrix this will lead to missing values (NA) for scale intercorrelations based upon those lower level correlations. If impute=TRUE (the default), a warning is issued and the correlations are imputed based upon the average correlations of the non-missing elements of each scale.
    Because the alpha estimate of reliability is based upon the correlations of the items rather than upon the covariances, this estimate of alpha is sometimes called ``standardized alpha".  If the raw items are available, it is useful to compare standardized alpha with the raw alpha found using <code><a href='score.items.html'>scoreItems</a></code>.  They will differ substantially only if the items differ a great deal in their variances.
    <code>scoreOverlap</code> answers an important question when developing scales and related subscales, or when comparing alternative versions of scales.  For by removing the effect of item overlap, it gives a better estimate the relationship between the latent variables estimated by the observed sum (mean) scores.</p>
    
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p></p>
<dt>cor </dt><dd><p>the (raw) correlation matrix of the clusters</p></dd>
  <dt>sd </dt><dd><p>standard deviation of the cluster scores</p></dd>
  <dt>corrected </dt><dd><p>raw correlations below the diagonal, alphas on diagonal, disattenuated above diagonal</p></dd>
  <dt>alpha</dt><dd><p>The (standardized) alpha reliability of each scale.</p></dd>
  <dt>G6</dt><dd><p>Guttman's Lambda 6 reliability estimate is based upon the smcs for each item in a scale.  G6 uses the smc based upon the entire item domain.</p></dd>
  <dt>av.r</dt><dd><p>The average inter item correlation within a scale</p></dd>
 <dt>size</dt><dd><p>How many items are in each cluster?</p></dd>
 

    
    <h2 class="hasAnchor" id="references"><a class="anchor" href="#references"></a>References</h2>

    
    <p>Bashaw, W. and Anderson Jr, H. E. (1967). A correction for replicated error in correlation coefficients. Psychometrika, 32(4):435-441.</p>
<p>Cureton, E. (1966). Corrected item-test correlations. Psychometrika, 31(1):93-96.</p>
    
    <h2 class="hasAnchor" id="note"><a class="anchor" href="#note"></a>Note</h2>

    <p>See SAPA  Revelle, W., Wilt, J.,  and Rosenthal, A. (2010)  Personality and Cognition: The Personality-Cognition Link. In Gruszka, A.  and Matthews, G. and Szymura, B. (Eds.) Handbook of Individual Differences in Cognition: Attention, Memory and Executive Control, Springer.</p>
<p>The second example uses the <code><a href='msq.html'>msq</a></code> data set of 72 measures of motivational state to examine the overlap between four lower level scales and two higher level scales.</p>
    
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <p><code><a href='factor2cluster.html'>factor2cluster</a></code>, <code><a href='set.cor.html'>mat.regress</a></code>, <code><a href='alpha.html'>alpha</a></code>, and most importantly, <code><a href='score.items.html'>scoreItems</a></code>, which will do all of what cluster.cor does for most users.  cluster.cor is an important helper function for <code><a href='ICLUST.html'>iclust</a></code></p>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'>#use the msq data set that shows the structure of energetic and tense arousal</span>
<span class='no'>small.msq</span> <span class='kw'>&lt;-</span> <span class='no'>msq</span>[ <span class='fu'>c</span>(<span class='st'>"active"</span>, <span class='st'>"energetic"</span>, <span class='st'>"vigorous"</span>, <span class='st'>"wakeful"</span>, <span class='st'>"wide.awake"</span>,
<span class='st'>"full.of.pep"</span>, <span class='st'>"lively"</span>, <span class='st'>"sleepy"</span>, <span class='st'>"tired"</span>, <span class='st'>"drowsy"</span>,<span class='st'>"intense"</span>, <span class='st'>"jittery"</span>, <span class='st'>"fearful"</span>,
 <span class='st'>"tense"</span>, <span class='st'>"clutched.up"</span>, <span class='st'>"quiet"</span>, <span class='st'>"still"</span>,    <span class='st'>"placid"</span>, <span class='st'>"calm"</span>, <span class='st'>"at.rest"</span>) ]
<span class='no'>small.R</span> <span class='kw'>&lt;-</span> <span class='fu'>cor</span>(<span class='no'>small.msq</span>,<span class='kw'>use</span><span class='kw'>=</span><span class='st'>"pairwise"</span>)
<span class='no'>keys.list</span> <span class='kw'>&lt;-</span> <span class='fu'>list</span>(
<span class='kw'>EA</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='st'>"active"</span>, <span class='st'>"energetic"</span>, <span class='st'>"vigorous"</span>, <span class='st'>"wakeful"</span>, <span class='st'>"wide.awake"</span>, <span class='st'>"full.of.pep"</span>,
       <span class='st'>"lively"</span>, <span class='st'>"-sleepy"</span>, <span class='st'>"-tired"</span>, <span class='st'>"-drowsy"</span>),
<span class='kw'>TA</span> <span class='kw'>=</span><span class='fu'>c</span>(<span class='st'>"intense"</span>, <span class='st'>"jittery"</span>, <span class='st'>"fearful"</span>, <span class='st'>"tense"</span>, <span class='st'>"clutched.up"</span>, <span class='st'>"-quiet"</span>, <span class='st'>"-still"</span>,
       <span class='st'>"-placid"</span>, <span class='st'>"-calm"</span>, <span class='st'>"-at.rest"</span>) ,

<span class='kw'>high.EA</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='st'>"active"</span>, <span class='st'>"energetic"</span>, <span class='st'>"vigorous"</span>, <span class='st'>"wakeful"</span>, <span class='st'>"wide.awake"</span>, <span class='st'>"full.of.pep"</span>,
       <span class='st'>"lively"</span>),
<span class='kw'>low.EA</span> <span class='kw'>=</span><span class='fu'>c</span>(<span class='st'>"sleepy"</span>, <span class='st'>"tired"</span>, <span class='st'>"drowsy"</span>),
<span class='kw'>lowTA</span><span class='kw'>=</span> <span class='fu'>c</span>(<span class='st'>"quiet"</span>, <span class='st'>"still"</span>, <span class='st'>"placid"</span>, <span class='st'>"calm"</span>, <span class='st'>"at.rest"</span>),
<span class='kw'>highTA</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='st'>"intense"</span>, <span class='st'>"jittery"</span>, <span class='st'>"fearful"</span>, <span class='st'>"tense"</span>, <span class='st'>"clutched.up"</span>)
   )

<span class='no'>keys</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='make.keys.html'>make.keys</a></span>(<span class='no'>small.R</span>,<span class='no'>keys.list</span>)

<span class='no'>adjusted.scales</span> <span class='kw'>&lt;-</span> <span class='fu'>scoreOverlap</span>(<span class='no'>keys.list</span>,<span class='no'>small.R</span>)
<span class='co'>#compare with unadjusted</span>
<span class='no'>confounded.scales</span> <span class='kw'>&lt;-</span> <span class='fu'>cluster.cor</span>(<span class='no'>keys</span>,<span class='no'>small.R</span>)
<span class='fu'>summary</span>(<span class='no'>adjusted.scales</span>)</div><div class='output co'>#&gt; Call: scoreOverlap(keys = keys.list, r = small.R)
#&gt; 
#&gt; Scale intercorrelations adjusted for item overlap
#&gt; Scale intercorrelations corrected for attenuation 
#&gt;  raw correlations (corrected for overlap) below the diagonal, (standardized) alpha on the diagonal 
#&gt;  corrected (for overlap and reliability) correlations above the diagonal:
#&gt;            EA    TA high.EA low.EA lowTA highTA
#&gt; EA       0.93  0.27   0.965 -0.803 -0.18  0.253
#&gt; TA       0.23  0.75   0.282 -0.167 -0.81  0.821
#&gt; high.EA  0.90  0.24   0.937 -0.620 -0.12  0.324
#&gt; low.EA  -0.75 -0.14  -0.579  0.928  0.25 -0.023
#&gt; lowTA   -0.15 -0.60  -0.098  0.204  0.73 -0.335
#&gt; highTA   0.21  0.62   0.273 -0.019 -0.25  0.757</div><div class='input'><span class='co'>#note that the EA and high and low EA and TA and high and low TA </span>
<span class='co'># scale correlations are confounded</span>
<span class='fu'>summary</span>(<span class='no'>confounded.scales</span>)</div><div class='output co'>#&gt; Call: cluster.cor(keys = keys, r.mat = small.R)
#&gt; 
#&gt; Scale intercorrelations corrected for attenuation 
#&gt;  raw correlations below the diagonal, (standardized) alpha on the diagonal 
#&gt;  corrected correlations above the diagonal:
#&gt;            EA    TA high.EA low.EA lowTA highTA
#&gt; EA       0.93  0.27   1.024 -0.848 -0.18  0.253
#&gt; TA       0.23  0.75   0.282 -0.167 -1.06  1.056
#&gt; high.EA  0.96  0.24   0.937 -0.620 -0.12  0.324
#&gt; low.EA  -0.79 -0.14  -0.579  0.928  0.25 -0.023
#&gt; lowTA   -0.15 -0.78  -0.098  0.204  0.73 -0.335
#&gt; highTA   0.21  0.80   0.273 -0.019 -0.25  0.757</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#details">Details</a></li>

      <li><a href="#value">Value</a></li>

      <li><a href="#references">References</a></li>

      <li><a href="#note">Note</a></li>

      <li><a href="#see-also">See also</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

    <h2>Author</h2>
    
Maintainer: William Revelle <a href='mailto:revelle@northwestern.edu'>revelle@northwestern.edu</a>


  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by William Revelle.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://hadley.github.io/pkgdown/">pkgdown</a>.</p>
</div>

      </footer>
   </div>

  </body>
</html>
