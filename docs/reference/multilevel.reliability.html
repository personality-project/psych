<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Find and plot various reliability/gneralizability coefficients for multilevel data — multilevel.reliability • psych</title>

<!-- jquery -->
<script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">


<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script>
<script src="../pkgdown.js"></script>

<!-- mathjax -->
<script src='https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="../index.html">psych</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../reference/index.html">Reference</a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

      <div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Find and plot various reliability/gneralizability coefficients for multilevel data</h1>
    </div>

    
    <p>Various indicators of reliability of multilevel data (e.g., items over time nested within subjects) may be found using generalizability theory.  A basic three way anova is applied to the data from which variance components are extracted. Random effects for a nested design are found by lme.    These are, in turn, converted to several reliability/generalizability coefficients.  An optional call to lme4 to use lmer may be used for unbalanced designs with missing data. mlArrange is a  helper function to convert wide to long format.  Data can be rearranged from wide to long format, and multiple lattice plots of observations overtime for multiple variables and multiple subjects are created.</p>
    

    <pre class="usage"><span class='fu'>mlr</span>(<span class='no'>x</span>, <span class='kw'>grp</span> <span class='kw'>=</span> <span class='st'>"id"</span>, <span class='kw'>Time</span> <span class='kw'>=</span> <span class='st'>"time"</span>, <span class='kw'>items</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='fl'>3</span>:<span class='fl'>5</span>),<span class='kw'>alpha</span><span class='kw'>=</span><span class='fl'>TRUE</span>,<span class='kw'>icc</span><span class='kw'>=</span><span class='fl'>FALSE</span>, <span class='kw'>aov</span><span class='kw'>=</span><span class='fl'>TRUE</span>,
      <span class='kw'>lmer</span><span class='kw'>=</span><span class='fl'>FALSE</span>,<span class='kw'>lme</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>,<span class='kw'>long</span><span class='kw'>=</span><span class='fl'>FALSE</span>,<span class='kw'>values</span><span class='kw'>=</span><span class='fl'>NA</span>,<span class='kw'>na.action</span><span class='kw'>=</span><span class='st'>"na.omit"</span>,<span class='kw'>plot</span><span class='kw'>=</span><span class='fl'>FALSE</span>,
        <span class='kw'>main</span><span class='kw'>=</span><span class='st'>"Lattice Plot by subjects over time"</span>)
<span class='fu'>mlArrange</span>(<span class='no'>x</span>, <span class='kw'>grp</span> <span class='kw'>=</span> <span class='st'>"id"</span>, <span class='kw'>Time</span> <span class='kw'>=</span> <span class='st'>"time"</span>, <span class='kw'>items</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='fl'>3</span>:<span class='fl'>5</span>),<span class='kw'>extra</span><span class='kw'>=</span><span class='kw'>NULL</span>)
<span class='fu'>mlPlot</span>(<span class='no'>x</span>, <span class='kw'>grp</span> <span class='kw'>=</span> <span class='st'>"id"</span>, <span class='kw'>Time</span> <span class='kw'>=</span> <span class='st'>"time"</span>, <span class='kw'>items</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='fl'>3</span>:<span class='fl'>5</span>),<span class='kw'>extra</span><span class='kw'>=</span><span class='kw'>NULL</span>,
   <span class='kw'>col</span><span class='kw'>=</span><span class='fu'>c</span>(<span class='st'>"blue"</span>,<span class='st'>"red"</span>,<span class='st'>"black"</span>,<span class='st'>"grey"</span>),
    <span class='kw'>main</span><span class='kw'>=</span><span class='st'>"Lattice Plot by subjects over time"</span>,<span class='no'>...</span>)
<span class='fu'>multilevel.reliability</span>(<span class='no'>x</span>, <span class='kw'>grp</span> <span class='kw'>=</span> <span class='st'>"id"</span>, <span class='kw'>Time</span> <span class='kw'>=</span> <span class='st'>"time"</span>, <span class='kw'>items</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='fl'>3</span>:<span class='fl'>5</span>),<span class='kw'>alpha</span><span class='kw'>=</span><span class='fl'>TRUE</span>,<span class='kw'>icc</span><span class='kw'>=</span><span class='fl'>FALSE</span>,
 <span class='kw'>aov</span><span class='kw'>=</span><span class='fl'>TRUE</span>,<span class='kw'>lmer</span><span class='kw'>=</span><span class='fl'>FALSE</span>,<span class='kw'>lme</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>,<span class='kw'>long</span><span class='kw'>=</span><span class='fl'>FALSE</span>,<span class='kw'>values</span><span class='kw'>=</span><span class='fl'>NA</span>,<span class='kw'>na.action</span><span class='kw'>=</span><span class='st'>"na.omit"</span>,
   <span class='kw'>plot</span><span class='kw'>=</span><span class='fl'>FALSE</span>,<span class='kw'>main</span><span class='kw'>=</span><span class='st'>"Lattice Plot by subjects over time"</span>) <span class='co'>#alias for mlr</span></pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a> Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>x</th>
      <td><p>A data frame with persons, time, and items.</p></td>
    </tr>
    <tr>
      <th>grp</th>
      <td><p>Which variable specifies people (groups)</p></td>
    </tr>
    <tr>
      <th>Time</th>
      <td><p>Which variable specifies the temporal sequence?</p></td>
    </tr>
    <tr>
      <th>items</th>
      <td><p>Which items should be scored?  Note that if there are multiple scales, just specify the items on one scale at a time.  An item to be reversed scored can be specified by a minus sign. If long format, this is the column specifying item number.</p></td>
    </tr>
    <tr>
      <th>alpha</th>
      <td><p>If TRUE, report alphas for every subject (default)</p></td>
    </tr>
    <tr>
      <th>icc</th>
      <td><p>If TRUE, find ICCs for each person -- can take a while</p></td>
    </tr>
    <tr>
      <th>aov</th>
      <td><p>if FALSE, and if icc  is FALSE, then just draw the within subject plots</p></td>
    </tr>
    <tr>
      <th>lmer</th>
      <td><p>Should we use the lme4 package and lmer or just do the ANOVA?  Requires the
       lme4 package to be installed.  Necessary to do crossed designs with missing data but takes a very long time.</p></td>
    </tr>
    <tr>
      <th>lme</th>
      <td><p>If TRUE, will find the nested components of variance.  Relatively fast.</p></td>
    </tr>
    <tr>
      <th>long</th>
      <td><p>Are the data in wide (default) or long format.</p></td>
    </tr>
    <tr>
      <th>values</th>
      <td><p>If the data are in long format, which column name (number) has the values to be analyzed?</p></td>
    </tr>
    <tr>
      <th>na.action</th>
      <td><p>How to handle missing data.  Passed to the lme function.</p></td>
    </tr>
    <tr>
      <th>plot</th>
      <td><p>If TRUE, show a lattice plot of the data by subject</p></td>
    </tr>
    <tr>
      <th>extra</th>
      <td><p>Names or locations of extra columns to include in the long output.  These will be carried over from the wide form and duplicated for all items. See example.</p></td>
    </tr>
    <tr>
      <th>col</th>
      <td><p>Color for the lines in mlPlot.  Note that items are categorical and thus drawn in alphabetical order. Order the colors appropriately.</p></td>
    </tr>
    <tr>
      <th>main</th>
      <td><p>The main title for the plot (if drawn)</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>Other parameters to pass to xyplot</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>Classical reliabiiity theory estimates the amount of variance in a set of observations due to a true score that varies over subjects.  Generalizability theory extends this model to include other sources of variance, specifically, time.  The classic studies using this approach are people measured over multiple time points with multiple items.  Then the question is, how stable are various individual differences. Intraclass correlations (ICC) are found for each subject over items, and for each subject over time. Alpha reliabilities  are found for each subject for the items across time.</p>
<p>More importantly, components of variance for people, items, time, and their interactions are found either by classical analysis of variance (aov) or by multilevel mixed effect modeling (lme).  These are then used to form several different estimates of generalizability.   Very thoughtful discussions of these procedure may be found in chapters by Shrout and Lane.</p>
<p>The variance components are the Between Person Variance \(\sigma^2_P\), the variance between items \(\sigma^2_I\), over time \(\sigma^2_T\),  and their interactions.</p>
<p>Then, \(RKF\) is the  reliability of average of all ratings across all items and  times (Fixed time effects). (Shrout and Lane, Equation 6):
    $$R_{kF} = \frac{\sigma^2_P + \sigma^2_{PI}/n.I}{\sigma^2_P + \sigma^2_{PI}/n.I + \sigma^2_e/(n.I n.P}$$</p>
<p>The generalizability of a single time point across all items (Random time effects) is just
    $$R_{1R} = \frac{\sigma^2_P + \sigma^2_{PI}/n.I}{\sigma^2_P + \sigma^2_{PI}/n.I + \sigma^2_T + \sigma^2_{PT}+ \sigma^2_e/(n.I)}$$
(Shrout and Lane equation 7 with a correction per Sean Lane.)</p>
<p>Generalizability of average time points across all items (Random effects). (Shrout and Lane, equation 8)
$$R_{kR} = \frac{\sigma^2_P + \sigma^2_{PI}/n.I}{\sigma^2_P + \sigma^2_{PI}/n.I + \sigma^2_T/n.T + \sigma^2_{PT}+ \sigma^2_e/n.I}$$</p>
<p>Generalizability of change scores (Shrout and Lane, equation  9)
$$R_{C} = \frac{\sigma^2_{PT}}{\sigma^2_{PT} + \sigma^2_e/n.I}$$.</p>
    <p>If the design may be thought of as fully crossed, then either aov or lmer can be used to estimate the components of variance.  With no missing data and a balanced design, these will give identical answers. However aov breaks down with missing data and seems to be very slow and very memory intensive for large problems ( 5,919  seconds for 209 cases with with 88 time points and three items on a Mac Powerbook with a 2.8 GHZ Intel Core I7). The slowdown probably is memory related, as the memory demands increased to 22.62 GB of compressed memory.   lmer will handle this design but is not nearly as slow  (242 seconds for the 209 cases with 88 time points and three items) as the aov approach.
    If the design is thought of as nested, rather than crossed, the components of variance are found using the <code>lme</code> function from nlme. This is very fast (114 cases with 88 time points and three items took 3.5 seconds).</p>
    <p>The nested design leads to the generalizability of K random effects Nested (Shrout and Lane, equation 10):
    $$R_{KRN} = \frac{\sigma^2_P }{\sigma^2_P + \sigma^2_{T(P)}/n.I + \sigma^2_e/(n.I n.P}$$
    And, finally, to the reliability of between person differences, averaged over items.  (Shrout and Lane, equation 11).
    $$R_{CN} = \frac{\sigma^2_{T(P)} }{\sigma^2_{T(P)} + \sigma^2_e/(n.I}$$</p>
<p>Unfortunately, when doing the nested analysis, <code>lme</code> will sometimes issue an obnoxious error about failing to converge.  To fix this, turning off <code>lme</code>  and just using lmer seems to solve the problem (i.e., set lme=FALSE and lmer=TRUE).  (<code>lme</code> is part of core R and its namespace is automatically attached when loading <code><a href='00.psych-package.html'>psych</a></code>). For many problems, lmer is not necessary and is thus not loaded.  However sometimes it is useful.  To use lmer it is necessary to have the lme4 package installed.  It will be automatically loaded if it is installed and requested. In the interests of making a 'thin' package, lmer is suggested,not required.</p>
<p>The input can either be in 'wide' or 'long' form.  If in wide form, then specify the grouping variable, the 'time' variable, and the the column numbers or names of the items. (See the first example).  If in  long format, then what is the column (name or number) of the dependent variable.  (See the second example.)</p>
<p><code>mlArrange</code> takes a wide data.frame and organizes it into a `long' data.frame suitable for a lattice <code>xyplot</code>.  This is a convenient alternative to <code>stack</code>, particularly for unbalanced designs.  The wide data frame is reorganized into a long data frame organized by grp (typically a subject id), by Time (typically a time varying variable, but can be anything, and then stacks the items within each person and time.  Extra variables are carried over and matched to the appropriate grp  and Time.</p>
<p>Thus, if we have N subjects over t time points for k items, in wide format for N * t rows where each row has k items and e extra pieces of information, we get a N x t * k row by 4 + e column dataframe.  The first four columns in the long output are id, time, values, and item names, the remaining columns are the extra values.  These  could be something such as a trait measure for each subject, or the situation in which the items are given.
    <code>mlArrange</code> plots k items over the  t time dimensions for each subject.</p>
    
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    

<dt>n.obs</dt><dd><p>Number of individuals</p></dd>
<dt>n.time</dt><dd><p>Maximum number of time intervals</p></dd>
<dt>n.items</dt><dd><p>Number of items</p></dd>
 <dt>components</dt><dd><p>Components of variance associated with individuals, Time, Items, and their interactions.</p></dd>
 <dt>RkF </dt><dd><p>Reliability of average of all ratings across all items and times (fixed effects).</p></dd>
<dt>R1R</dt><dd><p>Generalizability of a single time point across all items (Random effects)</p></dd>
<dt>RkR</dt><dd><p>Generalizability of average time points across all items (Random effects)</p></dd>
<dt>Rc</dt><dd><p>Generalizability of change scores over time.</p></dd>
<dt>RkRn</dt><dd><p>Generalizability of between person differences averaged over time and items</p></dd>  
<dt>Rcn</dt><dd><p>Generalizability of within person variations averaged over items (nested structure)</p></dd>
<dt>ANOVA</dt><dd><p>The summary anova table from which the components are found (if done),</p></dd>
<dt>s.lmer</dt><dd><p>The summary of the lmer analysis (if done),</p></dd>
<dt>s.lme</dt><dd><p>The summary of the lme analysis (if done),</p></dd>
<dt>alpha</dt><dd><p>Within subject alpha over items and time.</p></dd>
<dt>summary.by.person</dt><dd><p>Summary table of ICCs organized by person,</p></dd>
<dt>summary.by.time</dt><dd><p>Summary table of ICCs organized by time.</p></dd>
<dt>ICC.by.person</dt><dd><p>A rather long list of ICCs by person.</p></dd>
<dt>ICC.by.time</dt><dd><p>Another long list of ICCs, this time for each time period,</p></dd>
<dt>long</dt><dd><p>The data (x) have been rearranged into long form for graphics or for further analyses using lme, lmer, or aov that require long form.</p></dd>



    
    <h2 class="hasAnchor" id="references"><a class="anchor" href="#references"></a>References</h2>

    <p>Bolger, Niall and Laurenceau, Jean-Phillippe, (2013) Intensive longitudinal models.  New York.  Guilford Press.</p>
<p>Shrout, Patrick and Lane, Sean P (2012), Psychometrics.  In M.R. Mehl and T.S. Conner (eds)  Handbook of research methods for studying daily life, (p 302-320) New York. Guilford Press</p>
    
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <p><code><a href='sim.multilevel.html'>sim.multi</a></code> and <code><a href='sim.multilevel.html'>sim.multilevel</a></code> to generate multilevel data, <code><a href='statsBy.html'>statsBy</a></code> a for statistics for multi level analysis.</p>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'>#data from Shrout and Lane, 2012.</span>

<span class='no'>shrout</span> <span class='kw'>&lt;-</span> <span class='fu'>structure</span>(<span class='fu'>list</span>(<span class='kw'>Person</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='fl'>1L</span>, <span class='fl'>2L</span>, <span class='fl'>3L</span>, <span class='fl'>4L</span>, <span class='fl'>5L</span>, <span class='fl'>1L</span>, <span class='fl'>2L</span>, <span class='fl'>3L</span>, <span class='fl'>4L</span>,
<span class='fl'>5L</span>, <span class='fl'>1L</span>, <span class='fl'>2L</span>, <span class='fl'>3L</span>, <span class='fl'>4L</span>, <span class='fl'>5L</span>, <span class='fl'>1L</span>, <span class='fl'>2L</span>, <span class='fl'>3L</span>, <span class='fl'>4L</span>, <span class='fl'>5L</span>), <span class='kw'>Time</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='fl'>1L</span>, <span class='fl'>1L</span>,
<span class='fl'>1L</span>, <span class='fl'>1L</span>, <span class='fl'>1L</span>, <span class='fl'>2L</span>, <span class='fl'>2L</span>, <span class='fl'>2L</span>, <span class='fl'>2L</span>, <span class='fl'>2L</span>, <span class='fl'>3L</span>, <span class='fl'>3L</span>, <span class='fl'>3L</span>, <span class='fl'>3L</span>, <span class='fl'>3L</span>, <span class='fl'>4L</span>, <span class='fl'>4L</span>, <span class='fl'>4L</span>,
<span class='fl'>4L</span>, <span class='fl'>4L</span>), <span class='kw'>Item1</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='fl'>2L</span>, <span class='fl'>3L</span>, <span class='fl'>6L</span>, <span class='fl'>3L</span>, <span class='fl'>7L</span>, <span class='fl'>3L</span>, <span class='fl'>5L</span>, <span class='fl'>6L</span>, <span class='fl'>3L</span>, <span class='fl'>8L</span>, <span class='fl'>4L</span>,
<span class='fl'>4L</span>, <span class='fl'>7L</span>, <span class='fl'>5L</span>, <span class='fl'>6L</span>, <span class='fl'>1L</span>, <span class='fl'>5L</span>, <span class='fl'>8L</span>, <span class='fl'>8L</span>, <span class='fl'>6L</span>), <span class='kw'>Item2</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='fl'>3L</span>, <span class='fl'>4L</span>, <span class='fl'>6L</span>, <span class='fl'>4L</span>,
<span class='fl'>8L</span>, <span class='fl'>3L</span>, <span class='fl'>7L</span>, <span class='fl'>7L</span>, <span class='fl'>5L</span>, <span class='fl'>8L</span>, <span class='fl'>2L</span>, <span class='fl'>6L</span>, <span class='fl'>8L</span>, <span class='fl'>6L</span>, <span class='fl'>7L</span>, <span class='fl'>3L</span>, <span class='fl'>9L</span>, <span class='fl'>9L</span>, <span class='fl'>7L</span>, <span class='fl'>8L</span>
), <span class='kw'>Item3</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='fl'>6L</span>, <span class='fl'>4L</span>, <span class='fl'>5L</span>, <span class='fl'>3L</span>, <span class='fl'>7L</span>, <span class='fl'>4L</span>, <span class='fl'>7L</span>, <span class='fl'>8L</span>, <span class='fl'>9L</span>, <span class='fl'>9L</span>, <span class='fl'>5L</span>, <span class='fl'>7L</span>,
<span class='fl'>9L</span>, <span class='fl'>7L</span>, <span class='fl'>8L</span>, <span class='fl'>4L</span>, <span class='fl'>7L</span>, <span class='fl'>9L</span>, <span class='fl'>9L</span>, <span class='fl'>6L</span>)), <span class='kw'>.Names</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='st'>"Person"</span>, <span class='st'>"Time"</span>,
<span class='st'>"Item1"</span>, <span class='st'>"Item2"</span>, <span class='st'>"Item3"</span>), <span class='kw'>class</span> <span class='kw'>=</span> <span class='st'>"data.frame"</span>, <span class='kw'>row.names</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='fl'>NA</span>,
-<span class='fl'>20L</span>))

<span class='co'>#make shrout super wide</span>
<span class='co'>#Xwide &lt;- reshape(shrout,v.names=c("Item1","Item2","Item3"),timevar="Time", </span>
<span class='co'>#direction="wide",idvar="Person")</span>
<span class='co'>#add more helpful Names</span>
<span class='co'>#colnames(Xwide ) &lt;- c("Person",c(paste0("Item",1:3,".T",1),paste0("Item",1:3,".T",2), </span>
<span class='co'>#paste0("Item",1:3,".T",3),paste0("Item",1:3,".T",4)))</span>
<span class='co'>#make superwide into normal form  (i.e., just return it to the original shrout data</span>
<span class='co'>#Xlong &lt;-Xlong &lt;- reshape(Xwide,idvar="Person",2:13)</span>

<span class='co'>#Now use these data for a multilevel repliability study, use the normal wide form output</span>
<span class='no'>mg</span> <span class='kw'>&lt;-</span> <span class='fu'>mlr</span>(<span class='no'>shrout</span>,<span class='kw'>grp</span><span class='kw'>=</span><span class='st'>"Person"</span>,<span class='kw'>Time</span><span class='kw'>=</span><span class='st'>"Time"</span>,<span class='kw'>items</span><span class='kw'>=</span><span class='fl'>3</span>:<span class='fl'>5</span>)
<span class='co'>#which is the same as </span>
<span class='co'>#mg &lt;- multilevel.reliability(shrout,grp="Person",Time="Time",items=</span>
<span class='co'>#         c("Item1","Item2","Item3"),plot=TRUE)</span>
<span class='co'>#to show the lattice plot by subjects, set plot = TRUE</span>

<span class='co'>#Alternatively for long input (returned in this case from the prior run)</span>
<span class='fu'>mlr</span>(<span class='no'>mg</span>$<span class='no'>long</span>,<span class='kw'>grp</span><span class='kw'>=</span><span class='st'>"id"</span>,<span class='kw'>Time</span> <span class='kw'>=</span><span class='st'>"time"</span>,<span class='kw'>items</span><span class='kw'>=</span><span class='st'>"items"</span>, <span class='kw'>values</span><span class='kw'>=</span><span class='st'>"values"</span>,<span class='kw'>long</span><span class='kw'>=</span><span class='fl'>TRUE</span>)</div><div class='output co'>#&gt; 
#&gt; Multilevel Generalizability analysis   
#&gt; Call: mlr(x = mg$long, grp = "id", Time = "time", items = "items", 
#&gt;     long = TRUE, values = "values")
#&gt; 
#&gt; The data had  5  observations taken over  4  time intervals for  3 items.
#&gt; 
#&gt;  Alternative estimates of reliabilty based upon Generalizability theory
#&gt; 
#&gt; RkF  =  0.97 Reliability of average of all ratings across all items and  times (Fixed time effects)
#&gt; R1R  =  0.6 Generalizability of a single time point across all items (Random time effects)
#&gt; RkR  =  0.85 Generalizability of average time points across all items (Random time effects)
#&gt; Rc   =  0.74 Generalizability of change (fixed time points, fixed items) 
#&gt; RkRn =  0.85 Generalizability of between person differences averaged over time (time nested within people)
#&gt; Rcn  =  0.65 Generalizability of within person variations averaged over items  (time nested within people)
#&gt; 
#&gt;  These reliabilities are derived from the components of variance estimated by ANOVA 
#&gt;              variance Percent
#&gt; ID               2.34    0.44
#&gt; Time             0.38    0.07
#&gt; Items            0.61    0.11
#&gt; ID x time        0.92    0.17
#&gt; ID x items       0.12    0.02
#&gt; time x items     0.05    0.01
#&gt; Residual         0.96    0.18
#&gt; Total            5.38    1.00
#&gt; 
#&gt;  The nested components of variance estimated from lme are:
#&gt;          variance Percent
#&gt; id            2.3    0.45
#&gt; id(time)      1.1    0.21
#&gt; residual      1.7    0.34
#&gt; total         5.1    1.00
#&gt; 
#&gt; To see the ANOVA and alpha by subject, use the short = FALSE option.
#&gt;  To see the summaries of the ICCs by subject and time, use all=TRUE
#&gt;  To see specific objects select from the following list:
#&gt;  ANOVA s.lmer s.lme alpha summary.by.person summary.by.time ICC.by.person ICC.by.time lmer long Call</div><div class='input'>
<span class='co'>#example of mlArrange</span>
<span class='co'>#First, add two new columns to shrout and </span>
<span class='co'>#then convert to long output using mlArrange</span>
<span class='no'>total</span> <span class='kw'>&lt;-</span> <span class='fu'>rowSums</span>(<span class='no'>shrout</span>[<span class='fl'>3</span>:<span class='fl'>5</span>])
<span class='no'>caseid</span> <span class='kw'>&lt;-</span> <span class='fu'>rep</span>(<span class='fu'>paste0</span>(<span class='st'>"ID"</span>,<span class='fl'>1</span>:<span class='fl'>5</span>),<span class='fl'>4</span>)
<span class='no'>new.shrout</span> <span class='kw'>&lt;-</span> <span class='fu'>cbind</span>(<span class='no'>shrout</span>,<span class='kw'>total</span><span class='kw'>=</span><span class='no'>total</span>,<span class='kw'>case</span><span class='kw'>=</span><span class='no'>caseid</span>)
<span class='co'>#now convert to long</span>
<span class='no'>new.long</span> <span class='kw'>&lt;-</span> <span class='fu'>mlArrange</span>(<span class='no'>new.shrout</span>,<span class='kw'>grp</span><span class='kw'>=</span><span class='st'>"Person"</span>,<span class='kw'>Time</span><span class='kw'>=</span><span class='st'>"Time"</span>,<span class='kw'>items</span> <span class='kw'>=</span><span class='fl'>3</span>:<span class='fl'>5</span>,<span class='kw'>extra</span><span class='kw'>=</span><span class='fl'>6</span>:<span class='fl'>7</span>)
<span class='fu'><a href='headtail.html'>headTail</a></span>(<span class='no'>new.long</span>,<span class='fl'>6</span>,<span class='fl'>6</span>)</div><div class='output co'>#&gt;      id time values items total case
#&gt; 1     1    1      2 Item1    11  ID1
#&gt; 2     1    2      3 Item1    10  ID1
#&gt; 3     1    3      4 Item1    11  ID1
#&gt; 4     1    4      1 Item1     8  ID1
#&gt; 5     1    1      3 Item2    11  ID1
#&gt; 6     1    2      3 Item2    10  ID1
#&gt; ... ...  ...    ...  &lt;NA&gt;   ... &lt;NA&gt;
#&gt; 55    5    3      7 Item2    21  ID5
#&gt; 56    5    4      8 Item2    20  ID5
#&gt; 57    5    1      7 Item3    22  ID5
#&gt; 58    5    2      9 Item3    25  ID5
#&gt; 59    5    3      8 Item3    21  ID5
#&gt; 60    5    4      6 Item3    20  ID5</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#details">Details</a></li>

      <li><a href="#value">Value</a></li>

      <li><a href="#references">References</a></li>

      <li><a href="#see-also">See also</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

    <h2>Author</h2>
    William Revelle
  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by William Revelle.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://hadley.github.io/pkgdown/">pkgdown</a>.</p>
</div>

      </footer>
   </div>

  </body>
</html>
